<!-- Compact Search Bar -->
<form class="d-flex ms-3 search-bar" method="get" action="{% url 'search_result' %}">
    <input
        class="form-control form-control-sm me-2"
        type="search"
        name="q"
        placeholder="Search Book"
        aria-label="Search"
    >
    <button class="btn btn-sm btn-outline-success" type="submit">
        <i class="fas fa-search"></i>
    </button>
</form>

<ul class="navbar-nav ms-auto">

    {% if user.is_authenticated %}
    
        <!-- Show Username with Optional Profile Link -->
        <li class="nav-item d-flex align-items-center me-3">

            {% if user.is_authenticated %}
                {% if user.member %}
                    <a href="{% url 'profile_detail' user.member.pk %}" class="nav-username nav-link p-0">
                        <i class="fa-solid fa-user"></i> {{ user.username }}
                    </a>
                {% else %}
                    <span class="nav-username">
                        <i class="fa-solid fa-user"></i> {{ user.username }}
                    </span>
                {% endif %}
            {% endif %}

        </li>

        <!-- Logout Button -->
        <li class="nav-item">
            <form action="{% url 'account_logout' %}" method="post" class="d-inline">
                {% csrf_token %}
                <button class="btn btn-outline-light btn-sm logout-btn">Logout</button>
            </form>
        </li>

    {% else %}

        <!-- Login -->
        <li class="nav-item me-2">
            <a class="btn btn-outline-light btn-sm" href="{% url 'account_login' %}">
                Login
            </a>
        </li>

        <!-- Signup -->
        <li class="nav-item">
            <a class="btn btn-primary btn-sm" href="{% url 'account_signup' %}">
                Sign Up
            </a>
        </li>

    {% endif %}
</ul>
